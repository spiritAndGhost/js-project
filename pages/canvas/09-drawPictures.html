<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>绘制图片</title>
</head>
<body>
    <img src="../../images/bg.jpg" alt="我迷路了" title="点击我有惊喜">
    <canvas width="500" height="300" id="canvas"></canvas>
</body>
<script>
    /*
        参数1：要绘制的img  参数2、3：绘制的img在canvas中的坐标
        ctx.drawImage(img,0,0); 
        缩放图片 参数2：drawImage(image, x, y, width, height)   
        这个方法多了2个参数：width 和 height，这两个参数用来控制 当像canvas画入时应该缩放的大小。
        切片(slice) 参数3：drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)
        ​第一个参数和其它的是相同的，都是一个图像或者另一个 canvas 的引用。
        其他8个参数：
        ​前4个是定义图像源的切片位置和大小， 就是从原图片sx,sy位置开始切割长宽为sWidth和sHeight
        ​后4个则是定义切片的目标显示位置和大小。 切片在新建canvas的坐标dx, dy以及dWidth和dHeight
    */
    /*
    有时考虑到图片是从网络加载，如果 drawImage 的时候图片还没有完全加载完成，则什么都不做，个别浏览器会抛异常。
    所以应该保证在 img 绘制完成之后再 drawImage。
        var img = new Image();   // 创建img元素
        img.onload = function(){
            ctx.drawImage(img, 0, 0)
        }
        img.src = 'myImage.png'; // 设置图片源地址
    */
    function draw() {
        var canvas = document.getElementById("canvas");
        if(!canvas.getContext) return;
        var ctx = canvas.getContext("2d");
        var img = document.querySelector("img");
        // ctx.drawImage(img, 0, 0);
        // ctx.drawImage(img, 0, 0, 150, 100);
        ctx.drawImage(img, 100, 100, 500, 300, 0, 0, 500, 300);
    }
    document.querySelector("img").onclick = function() {
        draw();
    }
    
</script>
</html>